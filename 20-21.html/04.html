<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <div id="fade-obj" style="width:300px;height:300px;background:#000"></div>
  <button id="fade-btn">淡出</button>
  <script>
    var btn = document.getElementById("fade-btn");
    var cub = document.getElementById("fade-obj");
    var opacity = 10;
    var t;
    var text = "";
    var flag = true; //淡入淡出开关
    btn.onclick = function () {
      fadeCommon();
    }

    function fadeCommon() {
      btn.disabled = true; //按钮点击之后禁用
      t = setInterval(function () {
        flag ? opacity-- : opacity++; //根据开关判断淡入淡出
        cub.style.opacity = opacity / 10;
        if (opacity <= 0 || opacity >= 10) { //判断完全透明或完全不透明
          clearInterval(t);
          btn.disabled = false;
          if (opacity) {
            text = (flag = true) ? "淡出" : "淡入";
            btn.innerHTML = text;
          } else {
            text = (flag = false) ? "淡出" : "淡入";
            btn.innerHTML = text;
          }
        }
      }, 50);
    }
  </script>
  <!-- <script>
    var btn = document.getElementById("fade-btn");
    var cub = document.getElementById("fade-obj");
    var opacity = 100;
    var t;

    btn.onclick = function () {
      opacity == 100 ? SetOp() : SetDw();
    }

    function SetDw() {
      btn.setAttribute("disabled", true);
      opacity += 10;
      cub.style.opacity = opacity / 100;
      cub.style.filter = "alpha(opacity = " + opacity + ")";
      t = setTimeout(SetDw, 100);
      if (opacity == 100) {
        clearTimeout(t);
        btn.removeAttribute("disabled");
        btn.textContent = "淡出";
      }
    }

    function SetOp() {
      btn.setAttribute("disabled", true);
      opacity -= 10;
      cub.style.opacity = opacity / 100;
      cub.style.filter = "alpha(opacity = " + opacity + ")";
      t = setTimeout(SetOp, 100);
      if (opacity == 0) {
        clearTimeout(t);
        btn.removeAttribute("disabled");
        btn.textContent = "淡入";
      }
    }
  </script> -->
</body>

</html>