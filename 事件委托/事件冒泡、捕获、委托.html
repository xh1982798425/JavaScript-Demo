<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <div id="parent" style="background-color: #000;height: 400px;width: 400px" data-id="444">
    <div id="child" style="background-color: #fff;height: 200px;width: 200px" data-id="555"></div>
  </div>

  <!--1. 事件冒泡 -->
  <script>
    // document.getElementById('parent').onclick = function (e) {
    //   console.log(e);
    //   console.log(this.getAttribute('data-id'));
    // };
    // document.getElementById('child').onclick = function (e) {
    //   console.log(e);
    //   console.log(this.getAttribute('data-id'));
    // };
    //冒泡:当前点击事件最先执行，之后一直向上传递
    //-----------------------------------------------
    // document.getElementById("parent").onclick = function () {
    //   console.log(this.getAttribute("data-id"));
    // }
    //子元素在没有定义具体的click处理函数的时候仍然可以冒泡，触发父级元素的click事件。
    //-----------------------------------------------
    // document.getElementById('parent').onkeydown = function () {
    //   console.log(this.getAttribute('data-id'));
    // };
    // document.getElementById('child').onclick = function () {
    //   console.log(this.getAttribute('data-id'));
    // };
    //我们发现只有相应的事件会发生事件冒泡，不相关的事件不受影响（注意由于click为鼠标的点击，
    //所以同样会触发mousedown与mouseup等相关事件，同时发生冒泡！）
    //-----------------------------------------------
    // document.getElementById('parent').onclick = function () {
    //   console.log(this.getAttribute('data-id'));
    // };
    // document.getElementById('child').onclick = function (ev) {
    //   var e = ev || window.event; //<span style="color:#FF0000;">IE中event可以通过window.event随时取到，而其他浏览器需要通过参数传递</span>
    //   console.log(this.getAttribute('data-id'));
    //   stopPropagation(e);
    // };

    // function stopPropagation(e) {
    //   if (e.stopPropagation) {
    //     e.stopPropagation();
    //   } else {
    //     e.cancelBubble = true;
    //   }
    // }
    //e.stopPropagation阻止事件传播
    // var d1 = document.getElementById('parent');
    // d1.addEventListener('click', function (evt) {
    //   console.log('d1');
    //   evt.stopPropagation();
    // }, true);
    // var d2 = document.getElementById('child');
    // d2.addEventListener('click', function () {
    //   console.log('d2');
    // }, true);

    var d1 = document.getElementById('parent');
    d1.addEventListener('click', function (evt) {
      console.log('d1');
      evt.stopImmediatePropagation();
    }, true);
    d1.addEventListener('click', function (evt) {
      console.log('d1+1');
    }, true);
    var d2 = document.getElementById('child');
    d2.addEventListener('click', function () {
      console.log('d2');
    }, true);
  </script>

  <!--不管是事件冒泡还是事件捕获事件对象都表示当前触发事件的元素-->

  <!--2. 事件捕获 -->
  <!-- <script>
    document.getElementById('parent').addEventListener("click", function (e) {
      console.log(e);
      console.log(this.getAttribute('data-id'));
    }, true);
    document.getElementById('child').addEventListener("click", function (e) {
      console.log(e);
      console.log(this.getAttribute('data-id'));
    }, true);
    //捕获:从window对象开始向下传递
  </script> -->



</body>

</html>